
# 一、volatile是什么？

## 1.volatile是java虚拟机提供的轻量级的同步机制
### 1）保证可见性
即时通知

### 2）不保证原子性
** 原子性**：执行某项操作不被打断，要么同时成功，要么同时失败

> 不保证原子性可能会导致写丢失，一个线程将共享数据写入内存后，其余线程值还未更新又覆盖写入

** 解决原子性的方法**：
+ JUC下的AtomicInteger等
+ Synchronized

### 3）禁止指令重排
多线程环境中，线程交替运行，由于编译器优化重排
两个线程中使用的变量能否保持一致性是无法确定的

## 2.哪些地方用到volatile
+ 单例模式DCL 双重检查机制
> 指令重排可能导致指定了对象的内存空间，但数据还未初始化


## 2.JMM是什么？
java内存模型

### ①可见性
即时通知，一个线程更新了主内存的内容，其它线程要马上知道

1）线程解锁前，必须把共享变量的值刷新回主内存

2）线程加锁前，必须读取主内存的最新值到自己的工作内存

3）加锁解锁是同一个过程

### ②原子性


### ④有序性
